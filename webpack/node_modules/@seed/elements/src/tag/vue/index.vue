<!-- @since 2018-11-30 13:55 -->
<!-- @author vivaxy -->
<template>
  <div>
    <div v-if="type === types.SERVICE" :class="classes.service">
      {{ serviceTextMap[value] }}
    </div>
    <div
      v-if="type === types.RANKING_HORIZONTAL"
      :class="classes.rankingHorizontal"
    >
      TOP {{ value }}
    </div>
    <div
      v-if="type === types.RANKING_VERTICAL"
      :class="classes.rankingVertical"
    >
      <div :class="classes.rankingVerticalTop">TOP</div>
      <div :class="classes.rankingVerticalRanking">{{ toFixed(value, 2) }}</div>
    </div>
    <div
      v-if="type === types.CHAIN_CERTIFICATION"
      :class="classes.chainCertification"
    >
      连锁认证
    </div>
    <div v-if="type === types.BLACK_PEARL" :class="classes.blackPearl"></div>
    <div v-if="type === types.MUST_EAT_LIST" :class="classes.mustEatList"></div>
    <div
      v-if="type === types.MUST_LIVE_LIST"
      :class="classes.mustLiveList"
    ></div>
    <div
      v-if="type === types.MUST_STROLL_LIST"
      :class="classes.mustStrollList"
    ></div>
    <div
      v-if="type === types.MUST_PLAY_LIST"
      :class="classes.mustPlayList"
    ></div>
    <div v-if="type === types.PRIMARY" :class="classes.primary">
      <slot></slot>
    </div>
    <div v-if="type === types.DISABLED" :class="classes.disabled">
      <slot></slot>
    </div>
    <div v-if="type === types.FLAT" :class="classes.flat">
      <slot></slot>
    </div>
    <div v-if="type === types.SECONDARY" :class="classes.secondary">
      <slot></slot>
    </div>
    <div v-if="type === types.GHOST" :class="classes.ghost">
      <slot></slot>
    </div>
    <div v-if="type === types.FLAT_BLACK" :class="classes.flatBlack">
      <slot></slot>
    </div>
    <div v-if="type === types.TOPIC" :class="classes.topic">
      <div :class="classes.topicHashTag">
        <div :class="classes.topicHashTagVertical"></div>
        <div :class="classes.topicHashTagHorizontal"></div>
      </div>
      <div :class="classes.topicText">
        <slot></slot>
      </div>
    </div>
    <div
      v-if="type === types.TOP_QUALITY_REVIEW"
      :class="classes.topQualityReview"
    ></div>
    <div v-if="type === types.LEVEL" :class="classes.level"></div>
    <div v-if="type === types.VIP" :class="classes.vip"></div>
  </div>
</template>

<script>
import '../style/index.less';
import * as types from '../common/types.js';
import serviceTextMap from '../common/service-text-map.js';
import toFixed from '../common/to-fixed.js';
import { prefixCls } from '@seed/ui-base';

const commonClassName = prefixCls('tag');
export default {
  name: 'tag',
  data() {
    return { types, serviceTextMap, toFixed, prefixCls };
  },
  computed: {
    classes() {
      switch (this.type) {
        case types.SERVICE:
          return {
            service: [
              commonClassName,
              prefixCls('tag', 'service'),
              prefixCls('tag', 'service', this.value),
            ],
          };
        case types.RANKING_HORIZONTAL:
          return {
            rankingHorizontal: [
              commonClassName,
              prefixCls('tag', 'ranking-horizontal'),
              prefixCls('tag', 'ranking', this.value < 4 ? 'red' : 'yellow'),
            ],
          };
        case types.RANKING_VERTICAL:
          return {
            rankingVertical: [
              commonClassName,
              prefixCls('tag', 'ranking-vertical'),
              prefixCls('tag', 'ranking', this.value < 4 ? 'red' : 'yellow'),
            ],
            rankingVerticalTop: prefixCls('tag', 'ranking-vertical-top'),
            rankingVerticalRanking: prefixCls(
              'tag',
              'ranking-vertical-ranking',
            ),
          };
        case types.CHAIN_CERTIFICATION:
          return {
            chainCertification: [
              commonClassName,
              prefixCls('tag', 'chain-certification'),
            ],
          };
        case types.BLACK_PEARL:
          return {
            blackPearl: [commonClassName, prefixCls('tag', 'black-pearl')],
          };
        case types.MUST_EAT_LIST:
          return {
            mustEatList: [commonClassName, prefixCls('tag', 'must-eat-list')],
          };
        case types.MUST_LIVE_LIST:
          return {
            mustLiveList: [commonClassName, prefixCls('tag', 'must-live-list')],
          };
        case types.MUST_STROLL_LIST:
          return {
            mustStrollList: [
              commonClassName,
              prefixCls('tag', 'must-stroll-list'),
            ],
          };
        case types.MUST_PLAY_LIST:
          return {
            mustPlayList: [commonClassName, prefixCls('tag', 'must-play-list')],
          };
        case types.PRIMARY:
          if (this.size === 'lg') {
            return {
              primary: [
                commonClassName,
                prefixCls('tag', 'primary'),
                prefixCls('tag', 'primary', this.size),
              ],
            };
          }
          return {
            primary: [
              commonClassName,
              prefixCls('tag', 'primary'),
              prefixCls('tag', 'primary', 'md'),
            ],
          };
        case types.DISABLED:
          return {
            disabled: [commonClassName, prefixCls('tag', 'disabled')],
          };
        case types.FLAT:
          return {
            flat: [
              commonClassName,
              prefixCls('tag', 'flat'),
              this.bordered ? prefixCls('tag', 'flat', 'bordered') : '',
            ],
          };
        case types.SECONDARY:
          return {
            secondary: [commonClassName, prefixCls('tag', 'secondary')],
          };
        case types.GHOST:
          return {
            ghost: [commonClassName, prefixCls('tag', 'ghost')],
          };
        case types.FLAT_BLACK:
          return {
            flatBlack: [commonClassName, prefixCls('tag', 'flat-black')],
          };
        case types.TOPIC:
          return {
            topic: [commonClassName, prefixCls('tag', 'topic')],
            topicHashTag: prefixCls('tag', 'topic-hash-tag'),
            topicHashTagVertical: prefixCls(
              'tag',
              'topic-hash-tag',
              'vertical',
            ),
            topicHashTagHorizontal: prefixCls(
              'tag',
              'topic-hash-tag',
              'horizontal',
            ),
            topicText: prefixCls('tag', 'topic-text'),
          };
        case types.TOP_QUALITY_REVIEW:
          return {
            topQualityReview: [
              commonClassName,
              prefixCls('tag', 'top-quality-review'),
              prefixCls('tag', 'top-quality-review', this.size),
            ],
          };
        case types.LEVEL:
          return {
            level: [
              commonClassName,
              prefixCls('tag', 'level'),
              prefixCls('tag', 'level', this.value),
            ],
          };
        case types.VIP:
          return {
            vip: [
              commonClassName,
              prefixCls('tag', 'vip'),
              prefixCls('tag', 'vip', this.value),
              prefixCls('tag', 'vip', this.size),
            ],
          };
      }
      return {};
    },
  },
  props: {
    type: {
      type: String,
      validator(value) {
        return Object.values(types).includes(value);
      },
      required: true,
    },
    value: {
      type: [String, Number],
    },
    size: {
      type: [String, Number],
      validator(value) {
        return ['lg', 'md', 24, 34, 38, 42].includes(value);
      },
    },
    bordered: {
      type: Boolean,
      default: false,
    },
  },
};
</script>
