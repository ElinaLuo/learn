<template>
  <div :style="wrapStyle" :class="avatarClassnames">
    <image-cover v-bind="imageCoverData" v-if="imageCoverData" />
  </div>
</template>

<script>
import ImageCover from '../../image-cover/vue/index.vue';
import '../style/index.less';
import { prefixCls, cls } from '@seed/ui-base';
import { bool } from 'prop-types';

export default {
  name: 'avatar',
  components: {
    'image-cover': ImageCover,
  },

  props: {
    styles: {
      type: Object,
    },
    width: {
      type: Number,
    },
    url: {
      type: String,
      default: '',
    },
    loading: {
      type: Boolean,
      default: false,
    },
    imageCoverData: {
      type: Object,
    },
  },

  computed: {
    wrapStyle() {
      const style = {
        width: this.width / 2 + 'px',
        height: this.width / 2 + 'px',
        backgroundImage: this.url ? `url(${this.url})` : null,
      };
      return Object.assign({}, style, this.styles);
    },
    avatarClassnames() {
      return [
        prefixCls('avatar-container'),
        this.loading ? prefixCls('avatar-loading') : '',
      ].join(' ');
    },
  },
};
</script>
