<template>
  <div :class="wrapperClasses">
    <img
      class="seed-img-src"
      v-if="priority === PRIORITY_ENUM.HIGH"
      :src="displayUrl"
      alt=""
    />
    <div
      class="seed-img-bg"
      v-if="priority === PRIORITY_ENUM.LOW"
      :style="style"
    />
  </div>
</template>

<script>
import '../style/index.less';

import { prefixCls, priceZeroClear } from '@seed/ui-base';

export default {
  name: 'image-cover',
  data: function() {
    return {
      PRIORITY_ENUM: {
        HIGH: 'HIGH',
        LOW: 'LOW',
      },
    };
  },
  computed: {
    displayUrl() {
      return this.url && this.url.indexOf('http') < 0
        ? `https:${this.url}`
        : this.url;
    },
    style() {
      return {
        backgroundImage: 'url(' + this.displayUrl + ')',
      };
    },
    wrapperClasses() {
      if (this.className) {
        return [prefixCls('img-cover-wrap'), this.className].join(' ');
      } else {
        return [prefixCls('img-cover-wrap')].join(' ');
      }
    },
  },
  props: {
    className: {
      type: String,
      default: '',
    },
    priority: {
      type: String,
      default: 'HIGH',
    },
    url: {
      type: String,
      default: '',
    },
  },
};
</script>
