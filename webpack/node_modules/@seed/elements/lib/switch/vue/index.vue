<template>
  <span :class="className" @click="toggle"></span>
</template>

<script>
import '../style/index.less';
import { prefixCls } from '@seed/ui-base';

export default {
  name: 'switch',
  props: {
    value: null,
    checked: {
      type: Boolean,
      default: false,
    },
    disabled: {
      type: Boolean,
      default: false,
    },
  },
  computed: {
    // 为了兼容 v-model 入参在 value 上的问题，并同时支持 checked 属性
    localChecked() {
      if (this.value !== undefined) {
        return !!this.value;
      }

      return this.checked;
    },
    className() {
      return [
        prefixCls('switch'),
        { [prefixCls('switch--checked')]: this.localChecked },
        { [prefixCls('switch--disabled')]: this.disabled },
      ];
    },
  },
  methods: {
    toggle() {
      if (this.disabled) return;

      this.$emit('change', !this.localChecked);
      // 兼容 v-model 使用方式
      this.$emit('input', !this.localChecked);
    },
  },
};
</script>
