# 对比

| 存储方案 | 容量限制 | 生命周期 | 作用域 | 同步性 | 数据结构 | 性能 | 安全性
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
Cookie | 4KB/域名 | 可设置 | 同源 | 同步 | 键值对字符串 | 差 | 低（易受XSS和CSRF攻击）
localStorage | 5MB/域名 | 持久 | 同源 | 同步 | 键值对字符串 | 中 | 中
sessionStorage | 5MB/域名 | 会话 | 同源（仅当前标签页，关闭则被清理） | 同步 | 键值对字符串 | 中 | 中
IndexedDB | 浏览器可用空间50% | 持久 | 同源 | 异步 | 对象存储 | 高 | 中
Cache API | 浏览器可用空间 | 持久 | Service Worker | 异步 | Request/Response | 高 | 高


同域与同站的区别：
同域：协议、域名、端口号必须一模一样，否则就是跨域
同站：站一模一样，“站”是由 “有效顶级域名 + 二级域名”（学术上称为 eTLD+1）决定的，如果不一样就是跨站
公式：eTLD+1
- eTLD (Effective Top-Level Domain)：有效顶级域名。例如 .com, .org, .cn, 甚至包括 .co.uk, .github.io 这种长尾后缀。
- +1：在这个后缀前面的那一级域名（通常是你花钱买的那个名字）。
举个栗子： 对于 https://www.taobao.com：
eTLD 是 .com
+1 是 taobao
也就是它的“站”是 taobao.com，举例：www.taobao.com 和 m.taobao.com 属于同站


# cookie
生命周期：

- 会话级，当前会话结束之后删除
- 持久性，可设置Expires（指定日期）或Max-Age（有效期）


属性：
- Domain: 域名，例如crm.sankuai.com，也可以是.sankuai.com
- Path: URL路径，一般为/
- HttpOnly: 不允许js访问，即document.cookie无法访问，可防止 XSS 攻击
- Secure: 允许仅在 HTTPS 下传输
- SameSite: 控制 cookie 是否随跨站请求一起发送
  - Strict: 最严格，仅对来自同一站点的请求发送cookie
  - Lax: 允许部分跨站请求发送cookie
  - None: 允许跨站请求发送cookie
- Cross Site

# Cache API
专门为 Service Workers 设计，用于存储网络请求及其对应的响应。

特点：主要用于实现 PWA 的离线访问功能，存储资源文件（HTML/JS/CSS/Image）