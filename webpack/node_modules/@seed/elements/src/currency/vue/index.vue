<template>
  <div v-if="size == 's'" :style="styles" :class="wrapclasses">
    {{ price ? '￥' + priceZeroClear(notclearZero, price) : '暂无售价' }}
    {{ subType ? subTypeText[subType] : null }}
  </div>
  <div v-else :style="styles" :class="prefixCls('price')">
    <div :class="prefixCls(size ? `price_${size}` : 'price_m')">
      <i>￥</i>{{ price ? priceZeroClear(notclearZero, price) : '暂无售价' }}
    </div>
    <span v-if="subType && !originPrice">{{ subTypeText[subType] }}</span>
    <div :class="prefixCls('origin_price_wrap')">
      <div v-if="discount" :class="prefixCls('discount_tag')">
        {{ discount }}
      </div>
      <span v-if="originPrice"
        >￥<del>{{ priceZeroClear(notclearZero, originPrice) }}</del></span
      >
    </div>
  </div>
</template>

<script>
import '../style/index.less';
import { prefixCls, priceZeroClear } from '@seed/ui-base';

export default {
  name: 'currency',
  data: function() {
    return {
      subTypeText: {
        none: '',
        start: '起',
        avg: '/人',
      },
    };
  },
  props: {
    originPrice: {
      type: Number,
      default: 0,
    },
    price: {
      type: Number,
      default: 0,
    },
    size: {
      type: String,
      default: 's',
      validator: function(value) {
        return ['s', 'm', 'l'].indexOf(value) > -1;
      },
    },
    subType: {
      type: String,
      default: 'none',
    },
    discount: {
      type: String,
      default: '',
    },
    notclearZero: {
      type: Boolean,
      default: false,
    },
    styles: {
      type: Object,
    },
  },
  computed: {
    wrapclasses() {
      return [
        prefixCls(`price`),
        this.size ? prefixCls(`size_${this.size}`) : prefixCls('price_m'),
      ];
    },
  },
  methods: {
    prefixCls(...arg) {
      return prefixCls(...arg);
    },
    priceZeroClear(...arg) {
      return priceZeroClear(...arg);
    },
  },
};
</script>
