<template>
  <div
    class="seed-checktag"
    :class="[
      subText ? 'seed-checktag--multi-line' : 'seed-checktag--single-line',
      {
        'seed-checktag--checked': localChecked,
        'seed-checktag--disabled': disabled,
      },
    ]"
    @click="handleClick"
  >
    <div v-if="subText" class="seed-checktag__content">
      <p class="seed-checktag__text">{{ text }}</p>
      <p class="seed-checktag__subtext">{{ subText }}</p>
    </div>
    <template v-else>{{ text }}</template>
  </div>
</template>

<script>
import '../style/index.less';

export default {
  name: 'checktag',
  props: {
    text: {
      type: String,
    },
    subText: {
      type: String,
    },
    checked: {
      type: Boolean,
      default: false,
    },
    disabled: {
      type: Boolean,
      default: false,
    },
    value: {
      type: Boolean,
      default: false,
    },
  },
  data() {
    return {
      localChecked: false,
    };
  },
  created() {
    this.localChecked = this.value || this.checked;
  },
  watch: {
    value() {
      this.localChecked = this.value;
      this.emitEvent();
    },
    checked() {
      this.localChecked = this.checked;
      this.emitEvent();
    },
  },
  methods: {
    handleClick() {
      if (this.disabled) return;
      this.localChecked = !this.localChecked;
      this.emitEvent();
    },
    emitEvent() {
      this.$emit('input', this.localChecked);
      this.$emit('change', this.localChecked);
    },
  },
};
</script>
