<template>
  <div :class="prefixCls('star-mt-wrap')">
    <div v-for="(item, index) in stars" :key="index" :class="starClass(index)">
      <div v-if="halfStar(index)" :class="prefixCls('star-mt-half')"></div>
    </div>
  </div>
</template>

<script>
import '../style/mtstar.less';
import { prefixCls } from '@seed/ui-base';

const STARS = Array.from({ length: 5 });

export default {
  name: 'mtstar',
  props: {
    star: {
      type: Number,
      default: 0,
    },
  },
  computed: {
    starInfo() {
      const { star } = this;
      const starValueRound = Math.round(star / 10);
      const starValueCeil = Math.ceil(star / 10);
      return STARS.map((item, index) => ({
        value: index + 1 <= starValueRound ? index + 1 : 0,
        isHalf: star % 10 > 0 && index + 1 === starValueCeil,
      }));
    },
    stars() {
      return STARS;
    },
  },
  methods: {
    prefixCls(...arg) {
      return prefixCls(...arg);
    },
    starClass(index) {
      return [
        prefixCls('star-mt'),
        prefixCls('star-mt-' + this.starInfo[index].value),
      ];
    },
    halfStar(index) {
      return this.starInfo[index].isHalf;
    },
  },
};
</script>
